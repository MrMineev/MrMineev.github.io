!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("BusinessManagerAPI")):"function"==typeof define&&define.amd?define("browser-notifications-client",["BusinessManagerAPI"],n):"object"==typeof exports?exports["browser-notifications-client"]=n(require("BusinessManagerAPI")):e["browser-notifications-client"]=n(e.BusinessManagerAPI)}("undefined"!=typeof self?self:this,(function(e){return function(){var n,i,t={4473:function(e,n){"use strict";n.Z="1.6.0"},4457:function(e,n,i){"use strict";i.r(n),i.d(n,{APNsPushId:function(){return d},APNsWebServiceURL:function(){return l},allowedUrlPrefixes:function(){return o},firebaseConfig:function(){return r},firebasePublicKey:function(){return c},getCurrentUrlPrefix:function(){return a},locationHref:function(){return s},pingNotificationsApp:function(){return f},serviceWorkerUrl:function(){return u}});var t=i(4473);const r={apiKey:"AIzaSyB3N--ERgl49X9uQWI23x5tukPZpgl6pRk",authDomain:"wix-ping-notification.firebaseapp.com",databaseURL:"https://wix-ping-notification.firebaseio.com",projectId:"wix-ping-notification",storageBucket:"wix-ping-notification.appspot.com",messagingSenderId:"257704878507",appId:"1:257704878507:web:740846cb3b487805d032ee"},o=["https://manage.wix.com/","https://manage.editorx.com/"],s="undefined"==typeof location?"":location.href,a=e=>e.find((e=>s.startsWith(e)))||"<Disallowed Url Prefix in "+s+">",u=a(o)+"_partials/browser-notifications-client/"+t.Z+"/wix-ping-fcm-service-worker.bundle.min.js",c="BL9O0drViaP9kr7Dn6TVQLQt-4T7rWtA0Z7O7InSHtNW9BGrNXxmdGEXhRUixKxC-sbskQG7dpAn7U6r7fVhU64",f="WixBrowserNotifications",l="https://www.wix.com/_api/ping/push-notifications/safari",d="web.com.wix.browser-notifications"},4479:function(e,n,i){"use strict";i.d(n,{G6:function(){return r},Vl:function(){return a},e3:function(){return s}});var t=i(4457);const r=()=>{var e;return Boolean(null==(e=window.safari)?void 0:e.pushNotification)},o=()=>window.safari.pushNotification.permission(t.APNsPushId),s=()=>{var e;return null==(e=o())?void 0:e.deviceToken},a=()=>{var e;return(null==(e=o())?void 0:e.permission)||"denied"}},4197:function(n){"use strict";n.exports=e},3213:function(e,n,i){var t=i(6174);e.exports=function(e,n,i){return(n=t(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},7662:function(e,n,i){var t=i(8114).default;e.exports=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,n||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6174:function(e,n,i){var t=i(8114).default,r=i(7662);e.exports=function(e){var n=r(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports},8114:function(e){function n(i){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,{a:n}),n},o.d=function(e,n){for(var i in n)o.o(n,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(n,i){return o.f[i](e,n),n}),[]))},o.u=function(e){return{678:"fcm-browser-notifications",792:"safari-browser-notifications"}[e]+".chunk.min.js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n={},i="_wix_browser_notifications_client:",o.l=function(e,t,r,s){if(n[e])n[e].push(t);else{var a,u;if(void 0!==r)for(var c=document.getElementsByTagName("script"),f=0;f<c.length;f++){var l=c[f];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==i+r){a=l;break}}a||(u=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",i+r),a.src=e,0!==a.src.indexOf(window.location.origin+"/")&&(a.crossOrigin="anonymous")),n[e]=[t];var d=function(i,t){a.onerror=a.onload=null,clearTimeout(p);var r=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(t)})),i)return i(t)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),u&&document.head.appendChild(a)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o.p="https://static.parastorage.com/services/browser-notifications-client/4e80541eb0ea9bd78d7ec5f037dc4faf755151af2dcf5bc533cbf123/",function(){var e={259:0};o.f.j=function(n,i){var t=o.o(e,n)?e[n]:void 0;if(0!==t)if(t)i.push(t[2]);else{var r=new Promise((function(i,r){t=e[n]=[i,r]}));i.push(t[2]=r);var s=o.p+o.u(n),a=new Error;o.l(s,(function(i){if(o.o(e,n)&&(0!==(t=e[n])&&(e[n]=void 0),t)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+n+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,t[1](a)}}),"chunk-"+n,n)}};var n=function(n,i){var t,r,s=i[0],a=i[1],u=i[2],c=0;if(s.some((function(n){return 0!==e[n]}))){for(t in a)o.o(a,t)&&(o.m[t]=a[t]);if(u)u(o)}for(n&&n(i);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=("undefined"!=typeof self?self:this).webpackJsonp__wix_browser_notifications_client=("undefined"!=typeof self?self:this).webpackJsonp__wix_browser_notifications_client||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var s={};return function(){"use strict";o.r(s);var e=o(4197),n=o(4457),i=o(3213),t=o.n(i);function r(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}var a=o(4479);class u{constructor(e){this.config=e,t()(this,"onPermissionRequestHandlers",{}),t()(this,"onPermissionResponseHandlers",{}),t()(this,"onPermissionChangeHandlers",{}),t()(this,"runningCounter",0),t()(this,"implementation",void 0)}isBrowserNotificationsSupported(){return(e=this.config).allowedUrlPrefixes.some((n=>e.locationHref.startsWith(n)))&&((0,a.G6)()||r());var e}isServiceWorkerRequired(){return!(0,a.G6)()}getBrowserNotificationsPermission(){return(0,a.G6)()?(0,a.Vl)():this.isBrowserNotificationsSupported()?Notification.permission:"denied"}async getImplementation(){if(!this.implementation)if((0,a.G6)()){const{SafariBrowserNotifications:e}=await o.e(792).then(o.bind(o,6750));this.implementation=new e(this.config,this.onPermissionRequestHandlers,this.onPermissionResponseHandlers)}else{const{FcmBrowserNotifications:e}=await o.e(678).then(o.bind(o,4568));this.implementation=new e(this.config,this.onPermissionRequestHandlers,this.onPermissionResponseHandlers,this.onPermissionChangeHandlers)}return this.implementation}registerForBrowserPermissionChange(e){return this.onPermissionChangeHandlers[++this.runningCounter]=e,()=>delete this.onPermissionChangeHandlers[this.runningCounter]}registerForBrowserPermissionRequest(e){return this.onPermissionRequestHandlers[++this.runningCounter]=e,()=>delete this.onPermissionRequestHandlers[this.runningCounter]}registerForBrowserPermissionResponse(e){return this.onPermissionResponseHandlers[++this.runningCounter]=e,()=>delete this.onPermissionResponseHandlers[this.runningCounter]}}const c="ping";class f extends e.BusinessManagerModule{constructor(e){super(e),(e=>{const n=new u(e);["isBrowserNotificationsSupported","getBrowserNotificationsPermission","registerForBrowserPermissionChange","registerForBrowserPermissionRequest","registerForBrowserPermissionResponse"].forEach((e=>window.ModuleRegistry.registerMethod(c+"."+e,(()=>n[e].bind(n))))),["isRegisteredForBrowserNotifications","isRegisteredForBrowserNotificationsOnSite","registerForBrowserNotifications","registerAndTurnOnSite","muteBrowserNotificationsForSite","unregisterFromBrowserNotifications"].forEach((e=>window.ModuleRegistry.registerMethod(c+"."+e,(()=>async i=>{const t=await n.getImplementation();return"registerForBrowserNotifications"===e?t[e]():t[e](i)}))))})(n)}}(0,e.registerModule)("BROWSER_NOTIFICATIONS",f)}(),s}()}));
//# sourceMappingURL=business-manager.umd.min.js.map