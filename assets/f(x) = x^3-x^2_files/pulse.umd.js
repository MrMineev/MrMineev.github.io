var Nr=Object.defineProperty;var $r=(T,I,W)=>I in T?Nr(T,I,{enumerable:!0,configurable:!0,writable:!0,value:W}):T[I]=W;var J=(T,I,W)=>($r(T,typeof I!="symbol"?I+"":I,W),W);(function(T){typeof define=="function"&&define.amd?define(T):T()})(function(){var mt;"use strict";var T,I,W,ne,he,ke=-1,V=function(t){addEventListener("pageshow",function(e){e.persisted&&(ke=e.timeStamp,t(e))},!0)},ve=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},re=function(){var t=ve();return t&&t.activationStart||0},B=function(t,e,n,r){var i=ve(),o="navigate";return n?o=n:ke>=0?o="back-forward-cache":i&&(document.prerendering||re()>0?o="prerender":document.wasDiscarded?o="restore":i.type&&(o=i.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o,navigationId:r||1}},U=function(t){return PerformanceObserver.supportedEntryTypes.includes("soft-navigation")&&(t==null?void 0:t.reportSoftNavs)},Fe=function(t){return t&&t!==1?window.performance&&performance.getEntriesByType&&performance.getEntriesByType("soft-navigation")[t-2]:window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},k=function(t,e,n){var r=U(n);try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0,includeSoftNavigationObservations:r},n||{})),i}}catch{}},E=function(t,e,n,r){var i,o;return function(u){e.value>=0&&(u||r)&&((o=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=o,e.rating=function(s,a){return s>a[1]?"poor":s>a[0]?"needs-improvement":"good"}(e.value,n),t(e))}},ie=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},oe=function(t){var e=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||t(n)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},R=-1,Le=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},ae=function(t){document.visibilityState==="hidden"&&R>-1&&(R=t.type==="visibilitychange"?t.timeStamp:0,_t())},He=function(){addEventListener("visibilitychange",ae,!0),addEventListener("prerenderingchange",ae,!0)},_t=function(){removeEventListener("visibilitychange",ae,!0),removeEventListener("prerenderingchange",ae,!0)},ge=function(){return R<0&&(R=Le(),He(),V(function(){setTimeout(function(){R=Le(),He()},0)})),{get firstHiddenTime(){return R}}},Y=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},ye=[1800,3e3],Ne=function(t,e){var n=U(e=e||{});Y(function(){var r,i=ge(),o=B("FCP"),u=k("paint",function(s){s.forEach(function(a){if(a.name==="first-contentful-paint"){n?(a.navigationId||1)>1&&(g="soft-navigation",b=a.navigationId,o=B("FCP",0,g,b),r=E(t,o,ye,e.reportAllChanges)):u.disconnect();var f=0;if(a.navigationId&&a.navigationId!==1){var d=Fe(a.navigationId),h=(d==null?void 0:d.startTime)||0;f=Math.max(a.startTime-h,0)}else f=Math.max(a.startTime-re(),0);(a.startTime<i.firstHiddenTime||a.navigationId&&a.navigationId>1)&&(o.value=f,o.entries.push(a),o.navigationId=a.navigationId||1,r(!0))}var g,b})},e);u&&(r=E(t,o,ye,e.reportAllChanges),V(function(s){o=B("FCP",0,"back-forward-cache",o.navigationId),r=E(t,o,ye,e.reportAllChanges),ie(function(){o.value=performance.now()-s.timeStamp,r(!0)})}))})},me=[.1,.25],bt=function(t,e){var n,r,i=U(e=e||{}),o=!1;Ne((n=function(){var u,s=B("CLS",0),a=0,f=[],d=function(b,p){s=B("CLS",0,b,p),u=E(t,s,me,e.reportAllChanges),a=0,o=!1},h=function(b){b.forEach(function(p){if(i&&p.navigationId&&p.navigationId>s.navigationId&&(a>s.value&&(s.value=a,s.entries=f),u(!0),d("soft-navigation",p.navigationId)),!p.hadRecentInput){var C=f[0],N=f[f.length-1];a&&p.startTime-N.startTime<1e3&&p.startTime-C.startTime<5e3?(a+=p.value,f.push(p)):(a=p.value,f=[p])}}),a>s.value&&(s.value=a,s.entries=f,u())},g=k("layout-shift",h,e);g&&(u=E(t,s,me,e.reportAllChanges),oe(function(){h(g.takeRecords()),u(!0),o=!0}),V(function(){d("back-forward-cache",s.navigationId),ie(function(){return u()})}),i&&k("soft-navigation",function(b){b.forEach(function(p){p.navigationId&&p.navigationId>s.navigationId&&(o||u(!0),d("soft-navigation",p.navigationId),u=E(t,s,me,e.reportAllChanges))})},e),setTimeout(u,0))},r=!1,function(u){r||(n(u),r=!0)}))},Z={passive:!0,capture:!0},Pt=new Date,$e=function(t,e){T||(T=e,I=t,W=new Date,Qe(removeEventListener),We())},We=function(){if(I>=0&&I<W-Pt){var t={entryType:"first-input",name:T.type,target:T.target,cancelable:T.cancelable,startTime:T.timeStamp,processingStart:T.timeStamp+I};ne.forEach(function(e){e([t])}),ne=[]}},wt=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(n,r){var i=function(){$e(n,r),u()},o=function(){u()},u=function(){removeEventListener("pointerup",i,Z),removeEventListener("pointercancel",o,Z)};addEventListener("pointerup",i,Z),addEventListener("pointercancel",o,Z)}(e,t):$e(e,t)}},Qe=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,wt,Z)})},pe=[100,300],Tt=function(t,e){var n=U(e=e||{});Y(function(){var r,i=ge(),o=B("FID"),u=function(a){a.forEach(function(f){var d,h;n?(f.navigationId||1)>1&&(d="soft-navigation",h=f.navigationId,o=B("FID",0,d,h),r=E(t,o,pe,e.reportAllChanges)):s.disconnect(),f.startTime<i.firstHiddenTime&&(o.value=f.processingStart-f.startTime,o.entries.push(f),o.navigationId=f.navigationId||1,r(!0))})},s=k("first-input",u,e);r=E(t,o,pe,e.reportAllChanges),s&&oe(function(){u(s.takeRecords()),n||s.disconnect()}),s&&V(function(){var a;o=B("FID",0,"back-forward-cache",o.navigationId),r=E(t,o,pe,e.reportAllChanges),ne=[],I=-1,T=null,Qe(addEventListener),a=u,ne.push(a),We()})})},_e=0,ue=1/0,K=0,ze=1,Ge=!1,Et=function(t){t.forEach(function(e){e.interactionId&&(Ge&&e.navigationId&&e.navigationId>ze&&(ze=e.navigationId,_e=0,ue=1/0,K=0),ue=Math.min(ue,e.interactionId),K=Math.max(K,e.interactionId),_e=K?(K-ue)/7+1:0)})},Ve=function(){return he?_e:performance.interactionCount||0},Ct=function(t){"interactionCount"in performance||he||(Ge=t||!1,he=k("event",Et,{type:"event",buffered:!0,durationThreshold:0,includeSoftNavigationObservations:t}))},be=[200,500],Ue=0,Re=function(){return Ve()-Ue},F=[],Pe={},qe=function(t){var e=F[F.length-1],n=Pe[t.interactionId];if(n||F.length<10||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};Pe[r.id]=r,F.push(r)}F.sort(function(i,o){return o.latency-i.latency}),F.splice(10).forEach(function(i){delete Pe[i.id]})}},Bt=function(t,e){var n=U(e=e||{}),r=!1;Y(function(){Ct(n);var i,o=B("INP"),u=function(d,h){F=[],Ue=d==="soft-navigation"?0:Ve(),o=B("INP",0,d,h),i=E(t,o,be,e.reportAllChanges),r=!1},s=function(){var d,h,g=(h=Math.min(F.length-1,Math.floor(Re()/50)),F[h]);g&&(g.latency!==o.value||(d=e)!==null&&d!==void 0&&d.reportAllChanges)&&(o.value=g.latency,o.entries=g.entries)},a=function(d){d.forEach(function(h){n&&h.navigationId&&h.navigationId>o.navigationId&&(r||(s(),o.value>0&&i(!0)),u("soft-navigation",h.navigationId)),h.interactionId&&qe(h),h.entryType==="first-input"&&!F.some(function(g){return g.entries.some(function(b){return h.duration===b.duration&&h.startTime===b.startTime})})&&qe(h)}),s(),i()},f=k("event",a,{durationThreshold:e.durationThreshold||40,opts:e});i=E(t,o,be,e.reportAllChanges),f&&(f.observe({type:"first-input",buffered:!0,includeSoftNavigationObservations:n}),oe(function(){a(f.takeRecords()),o.value<0&&Re()>0&&(o.value=0,o.entries=[]),i(!0)}),V(function(){u("back-forward-cache",o.navigationId),ie(function(){return i()})}),n&&k("soft-navigation",function(d){d.forEach(function(h){h.navigationId&&h.navigationId>o.navigationId&&(!r&&o.value>0&&i(!0),u("soft-navigation",h.navigationId),i=E(t,o,be,e.reportAllChanges))})},e))})},xe=[2500,4e3],Dt=function(t,e){var n=!1,r=U(e=e||{});Y(function(){var i,o=ge(),u=B("LCP"),s=function(h,g){u=B("LCP",0,h,g),i=E(t,u,xe,e.reportAllChanges),n=!1},a=function(h){h.forEach(function(g){if(g){g.navigationId&&g.navigationId>u.navigationId&&(n||i(!0),s("soft-navigation",g.navigationId));var b,p=0;g.navigationId!==1&&g.navigationId?p=Math.max(g.startTime-(((b=Fe(g.navigationId))===null||b===void 0?void 0:b.startTime)||0),0):p=Math.max(g.startTime-re(),0),g.startTime<o.firstHiddenTime&&(u.value=p,u.entries=[g],u.navigationId=g.navigationId||1,i())}})},f=function(){n||(a(d.takeRecords()),r||d.disconnect(),n=!0,i(!0))},d=k("largest-contentful-paint",a,e);d&&(i=E(t,u,xe,e.reportAllChanges),["keydown","click"].forEach(function(h){addEventListener(h,f,!0)}),oe(f),V(function(h){s("back-forward-cache",u.navigationId),ie(function(){u.value=performance.now()-h.timeStamp,n=!0,i(!0)})}),r&&k("soft-navigation",function(h){h.forEach(function(g){g.navigationId&&g.navigationId>u.navigationId&&(n||i(!0),s("soft-navigation",g.navigationId))})},e))})},we=[800,1800],Ot=function t(e){document.prerendering?Y(function(){return t(e)}):document.readyState!=="complete"?addEventListener("load",function(){return t(e)},!0):setTimeout(e,0)},Mt=function(t,e){var n=U(e=e||{}),r=B("TTFB"),i=E(t,r,we,e.reportAllChanges);Ot(function(){var o=ve();if(o){var u=o.responseStart;if(u<=0||u>performance.now())return;r.value=Math.max(u-re(),0),r.entries=[o],i(!0),V(function(){r=B("TTFB",0,"back-forward-cache",r.navigationId),(i=E(t,r,we,e.reportAllChanges))(!0)}),n&&k("soft-navigation",function(s){s.forEach(function(a){a.navigationId&&(r=B("TTFB",0,"soft-navigation",a.navigationId),(i=E(t,r,we,e.reportAllChanges))(!0))})},e)}})},P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function It(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function St(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Xe={},Q={},A={},jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var H=function(t){Ft(e,t);function e(n){At(this,e);var r=kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.name=r.constructor.name,r}return e}(Error);function Lt(t,e){if(t===void 0)throw new H(e)}function Ht(t,e){if(t!==void 0&&((typeof t>"u"?"undefined":jt(t))!=="object"||Array.isArray(t)||t===null))throw new H(e)}function Nt(t,e){if(!t)throw new H(e)}function $t(t,e){if(t!==void 0&&typeof t!="function")throw new H(e)}function Wt(t,e){if(t!==void 0&&typeof t!="boolean")throw new H(e)}function Qt(t,e){if(t!==void 0&&typeof t!="number")throw new H(e)}function zt(t,e){if(typeof Array.isArray=="function"){if(!Array.isArray(t))throw new H(e)}else if(Object.prototype.toString.call(t)!=="[object Array]")throw new H(e)}A.defined=Lt,A.object=Ht,A.ok=Nt,A.func=$t,A.boolean=Wt,A.number=Qt,A.array=zt,A.AssertionError=H;var Te={};Te.mapValues=function(t,e){return t?Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r,t),n},{}):{}},Te.filterValues=function(t,e){return t?Object.keys(t).reduce(function(n,r){var i=e(t[r],r,t);return i&&(n[r]=t[r]),n},{}):{}};var Ee={};Ee.timedPromise=function(t,e){var n=e.message,r=e.timeout,i=new Promise(function(o,u){setTimeout(u,r,n?"Timeout: "+n:"Timeout")});return Promise.race([t,i])},Ee.allAsObject=function(t){var e=Object.keys(t);return Promise.all(e.map(function(n){return t[n]})).then(function(n){return n.reduce(function(r,i,o){return r[e[o]]=i,r},{})})};var Gt={error:function(){if(console&&console.error){var e;(e=console).error.apply(e,arguments)}}};function Vt(t,e,n){var r=void 0;return function(){var i=this,o=arguments,u=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(u,e),s&&t.apply(i,o)}}var Ut=Vt;function Rt(t,e){var n=void 0;return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];n||(n=setTimeout(function(){t.apply(void 0,i),n=null},e))}}var qt=Rt,xt=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Xt=function(){function t(e,n){var r=[],i=!0,o=!1,u=void 0;try{for(var s=e[Symbol.iterator](),a;!(i=(a=s.next()).done)&&(r.push(a.value),!(n&&r.length===n));i=!0);}catch(f){o=!0,u=f}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}return r}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Yt=Ut,Zt=qt,Kt=function(e,n,r){return{dt:Date.now()-r,f:e,context:n}},en=function(e,n){return{dt:Date.now()-n,e,g:{}}},tn=function(e){var n={},r=e.e.length,i=e.e.map(function(u){var s=Object.keys(u.f).map(function(a){var f=u.f[a],d=a+"|"+f;return n[d]=n[d]||0,n[d]++,[a,f,d]});return Ce({},u,{f:s})}),o={};return i=i.map(function(u){var s=u.f.reduce(function(a,f){var d=Xt(f,3),h=d[0],g=d[1],b=d[2];return n[b]===r?o[h]=g:a[h]=g,a},{});return Ce({},u,{f:s})}),Ce({},e,{e:i,g:o})},nn=function(){function t(){Jt(this,t),this._initilized=!1}return xt(t,[{key:"_reset",value:function(){var n=this;this._startTime=Date.now(),this._resolve=null,this._promise=new Promise(function(r){return n._resolve=r})}},{key:"init",value:function(n,r){var i=this,o=n.delayMs,u=n.maxBatchSize,s=n.useThrottle,a=n.optimizeBatch;this._initilized||(this._maxBatchSize=u,this._optimizeBatch=a,this._queue=[],this._flushHandler=r,this._flushDebounced=s?Zt(function(){return i.flush()},o):Yt(function(){return i.flush()},o),this._initilized=!0,this._reset())}},{key:"flush",value:function(){if(!this._queue.length)return Promise.resolve();var n=this._queue.splice(0,this._queue.length),r=this._resolve,i=this._startTime;this._reset();var o=en(n,i);return this._optimizeBatch&&(o=tn(o)),this._flushHandler(o).then(r)}},{key:"feed",value:function(n,r){return this._queue.push(Kt(n,r,this._startTime)),this._queue.length===this._maxBatchSize?this.flush():(this._flushDebounced(),this._promise)}}]),t}(),Be=nn,rn={functional:!0,analytics:!0,__default:!0},on=function(e){return typeof e=="function"&&e()||rn},Je=function(e){return e.functional===!1||e.analytics===!1},an=function(e,n){return n==="essential"?!1:n==="functional"||n==="analytics"?e[n]===!1:Je(e)},un={shouldMuteNonEssentials:Je,shouldMuteByCategory:an,getPolicy:on},q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sn=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function cn(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var x=A,Ye=Te,Ze=Ye.mapValues,Ke=Ye.filterValues,et=Ee,ln=Gt,dn=Be,De=un,hn=De.shouldMuteByCategory,tt=De.shouldMuteNonEssentials,vn=De.getPolicy,gn=function(){function t(e,n){fn(this,t),this._publishers=e.publishers,this._validators=e.validators||[],this._defaults=e.defaults,this._ownDefaults={},this._events=e.events||{},this._context=n||{},this._defaultValueTimeout=e.defaultValueTimeout||5e3,this._defaultContinueOnFail=e.defaultContinueOnFail||!1,this._onPublisherFailHandler=e.onPublisherFailHandler||t._defaultPublisherFailHandler,this._isMuted=e.isMuted||function(){return!1},this._eventTransformer=e.eventTransformer||function(r){return r},this._payloadTransformer=e.payloadTransformer||function(r){return r},this._consentPolicyGetter=e.consentPolicyGetter||function(){return null},this._nonEssentialDefaults=e.nonEssentialDefaults||{},this._maxBatchSize=e.maxBatchSize||100,this._globalBatchQueue=e.globalBatchQueue}return sn(t,[{key:"report",value:function(n){x.defined(n,"Data must be provided"),x.object(n,"Data must be an object");var r=n.src,i=n.evid,o=n.params,u=cn(n,["src","evid","params"]);return this.log(q({src:r,evid:i},o),u)}},{key:"log",value:function(n,r,i){var o=this;x.defined(n,"Event object or event key must be provided.");var u=this._extractEventAndContext(n,r,i),s=u.event,a=u.context,f=vn(this._consentPolicyGetter),d=q({},this._context,a);if(this._isMuted()||hn(f,d.category))return Promise.resolve();if(d.useBatch){var h=this._initQueue(d,f),g=function(C){var N=o._eventTransformer(C,d);return h.feed(N,d)};if(this._globalBatchQueue)return this._getDefaults(this._defaults).then(function(p){var C=q({},p,o._getDynamicNonEssentialDefaults(f),o._getStaticNonEssentialDefaults(f),s,o._getPolicyFields(f,d.category));return g(C)});var b=q({},this._getDynamicDefaults(this._defaults),this._getDynamicNonEssentialDefaults(f),s,this._getPolicyFields(f,d.category));return g(b)}return this._getDefaults(this._defaults).then(function(p){var C=Object.assign(p,o._getDynamicNonEssentialDefaults(f),o._getStaticNonEssentialDefaults(f),s,o._getPolicyFields(f,d.category)),N=o._validators.length===0?!0:o._validators.some(function(c){return c.match(C)&&(c.execute(C)||!0)});if(!N)throw new Error("No validator accepted the event. Source: "+C.src+" Evid: "+(C.evid||C.evtId));var l=o._eventTransformer(C,d);return l=o._payloadTransformer(l,d),o._send(l,d)})}},{key:"flush",value:function(){return this._queue?this._queue.flush():Promise.resolve()}},{key:"updateDefaults",value:function(n){return x.defined(n,"Defaults must be provided"),x.object(n,"Defaults must be an object"),Object.assign(this._ownDefaults,n),this}},{key:"_send",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Promise.all(this._publishers.map(function(o){var u=q({},n);return Promise.resolve().then(function(){return o(u,i)}).catch(function(s){return r._onPublisherFailHandler(s,{publisherName:o.name,payload:n})})})).then(function(){})}},{key:"_extractEventAndContext",value:function(n,r,i){var o=void 0,u={};if(typeof n!="string")o=n,u=r||u;else{if(o=this._events[n],!o)throw new x.AssertionError("Event with key '"+n+"' not found in event map.");r&&(o=q({},o,r),u=i||u)}return{event:o,context:u}}},{key:"_initQueue",value:function(n,r){var i=this;if(this._queue)return this._queue;this._queue=this._globalBatchQueue||new dn;var o=function(s){i._globalBatchQueue||(s.g=Object.assign(i._getStaticDefaults(i._defaults),i._getStaticNonEssentialDefaults(r)));var a=i._payloadTransformer(s,n);return i._send(a,n)};return this._queue.init({delayMs:n.useBatch===!0?300:n.useBatch,maxBatchSize:this._maxBatchSize,useThrottle:!!this._globalBatchQueue,optimizeBatch:!!this._globalBatchQueue},o),this._queue}},{key:"_handleDefaultsError",value:function(n){return this._defaultContinueOnFail?(ln.error(n),null):Promise.reject(n)}},{key:"_getDynamicNonEssentialDefaults",value:function(n){if(!tt(n))return this._getDynamicDefaults(this._nonEssentialDefaults)}},{key:"_getStaticNonEssentialDefaults",value:function(n){if(!tt(n))return this._getStaticDefaults(this._nonEssentialDefaults)}},{key:"_withOwnDefaults",value:function(n){return Object.assign({},n,this._ownDefaults)}},{key:"_getDynamicDefaults",value:function(n){n=this._withOwnDefaults(n);var r=Ke(n,function(i){return typeof i=="function"});return Ze(r,function(i){return i()})}},{key:"_getStaticDefaults",value:function(n){n=this._withOwnDefaults(n);var r=Ke(n,function(i){return typeof i!="function"});return r}},{key:"_getDefaults",value:function(n){var r=this;if(n=this._withOwnDefaults(n),!n)return Promise.resolve({});var i=Ze(n,function(o,u){if(typeof o=="function")try{o=o()}catch(s){return r._handleDefaultsError(s)}return o&&typeof o.then=="function"?et.timedPromise(o,{message:"Cannot get default value '"+u+" for BI Event'",timeout:r._defaultValueTimeout}).catch(function(s){return r._handleDefaultsError(s)}):o});return et.allAsObject(i)}},{key:"_encodePolicyValue",value:function(n,r){return n?typeof n[r]=="boolean"?n[r]?1:0:n[r]:1}},{key:"_getPolicyFields",value:function(n,r){return{_isca:this._encodePolicyValue(n,"analytics"),_iscf:this._encodePolicyValue(n,"functional"),_ispd:n.__default?1:0,_ise:r==="essential"?1:0}}}],[{key:"_defaultPublisherFailHandler",value:function(n,r){var i=r.publisherName;return i}}]),t}(),nt=gn,yn=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var rt=A,it=function(){function t(){mn(this,t),this.reset()}return yn(t,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(n){var r=this;return rt.defined(n,"Handler must be provided."),rt.func(n,"Handler must be a function."),this._handlers.push(n),function(){var i=r._handlers.indexOf(n);i!==-1&&r._handlers.splice(i,1)}}},{key:"notifyLoggerCreated",value:function(n){this._handlers.forEach(function(r){return r(n)})}}]),t}(),ot={manager:new it,BiLoggerManager:it},pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function bn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _=A,Pn=nt,wn=ot,Tn=Be,En=function(){function t(){bn(this,t),this._publishers=[],this._validators=[],this._defaults={},this._nonEssentialDefaults={},this._events={},this._isMuted=!1,this._eventTransformer=null,this._payloadTransformer=null,this._consentPolicyGetter=null,this._maxBatchSize=null,this._batchQueue=null}return _n(t,[{key:"addPublisher",value:function(n){return _.defined(n,"Publisher must be provided"),_.ok(typeof n=="function","Expected a publisher function"),this._publishers.push(n),this}},{key:"addValidator",value:function(n){return _.defined(n,"Validator must be provided"),_.ok((typeof n>"u"?"undefined":pn(n))==="object"&&n,"Expected a validator object"),_.ok(n.execute&&n.match,"Provided validator does not match the interface"),this._validators.push(n),this}},{key:"setDefaults",value:function(n){return _.defined(n,"Defaults must be provided"),_.object(n,"Defaults must be an object"),this._defaults=n,this}},{key:"updateDefaults",value:function(n){return _.defined(n,"Defaults must be provided"),_.object(n,"Defaults must be an object"),Object.assign(this._defaults,n),this}},{key:"updateNonEssentialDefaults",value:function(n){return _.defined(n,"Non-essential Defaults must be provided"),_.object(n,"Non-essential Defaults must be an object"),Object.assign(this._nonEssentialDefaults,n),this}},{key:"setEvents",value:function(n){return _.defined(n,"Events must be provided"),_.object(n,"Events must be an object"),this._events=n,this}},{key:"setDefaultValueTimeout",value:function(n){return _.defined(n,"Default Value Timeout must be provided"),this._defaultValueTimeout=n,this}},{key:"setDefaultContinueOnFail",value:function(n){return _.defined(n,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=n,this}},{key:"setPublisherFailHandler",value:function(n){return _.defined(n,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=n,this}},{key:"setMuted",value:function(n){return _.defined(n,"Is Muted must be provided"),_.boolean(n,"Is Muted must be a boolean"),this._isMuted=n,this}},{key:"setMaxBatchSize",value:function(n){return _.defined(n,"Max Batch Size must be provided"),_.number(n,"Max Batch Size must be a number"),_.ok(n>0,"Max Batch Size must be higher than 0"),this._maxBatchSize=n,this}},{key:"setGlobalBatchQueue",value:function(n){return _.defined(n,"Global Batch Queue must be provided"),_.ok(n instanceof Tn,"Global Batch Queue must be an instance of BatchQueue"),this._globalBatchQueue=n,this}},{key:"withEventTransformer",value:function(n){return _.defined(n,"Event Transformer must be provided"),_.func(n,"Event Transformer must be a function"),this._eventTransformer=n,this}},{key:"withPayloadTransformer",value:function(n){return _.defined(n,"Payload Transformer must be provided"),_.func(n,"Payload Transformer must be a function"),this._payloadTransformer=n,this}},{key:"withConsentPolicyGetter",value:function(n){return _.defined(n,"Consent Policy Getter must be provided"),_.func(n,"Consent Policy Getter must be a function"),this._consentPolicyGetter=n,this}},{key:"logger",value:function(n){var r=this,i=new Pn({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler,isMuted:function(){return r._isMuted},eventTransformer:this._eventTransformer,payloadTransformer:this._payloadTransformer,consentPolicyGetter:this._consentPolicyGetter,nonEssentialDefaults:this._nonEssentialDefaults,maxBatchSize:this._maxBatchSize,globalBatchQueue:this._globalBatchQueue},n);return wn.manager.notifyLoggerCreated(i),i}}]),t}(),Cn=En,at=Cn,Bn=nt,ut=ot,Dn=Be;Q.BiLoggerFactory=at,Q.BiLogger=Bn,Q.BiLoggerManager=ut.BiLoggerManager,Q.factory=function(){return new at},Q.manager=ut.manager,Q.createBatchQueue=function(){return new Dn};var se={},L={},D={};Object.defineProperty(D,"__esModule",{value:!0}),D.readCookie=D.sendBeacon=D.getWindowSize=D.getDesktopSize=D.now=void 0;function On(){return typeof performance<"u"&&performance&&performance.now?performance.now():-1}D.now=On;function Mn(t){var e=t.screen&&t.screen.width||0,n=t.screen&&t.screen.height||0;return"".concat(e,"x").concat(n)}D.getDesktopSize=Mn;function In(t){var e=0,n=0;return t.innerWidth?(e=t.innerWidth,n=t.innerHeight):t.document&&(t.document.documentElement&&t.document.documentElement.clientWidth?(e=t.document.documentElement.clientWidth,n=t.document.documentElement.clientHeight):t.document.body&&t.document.body.clientWidth&&(e=t.document.body.clientWidth,n=t.document.body.clientHeight)),"".concat(e,"x").concat(n)}D.getWindowSize=In;function Sn(t,e){return typeof navigator>"u"||!navigator||!navigator.sendBeacon?!1:navigator.sendBeacon(t,e)}D.sendBeacon=Sn;function jn(t){if(typeof document>"u")return null;for(var e=document.cookie.split(";"),n=0,r=e;n<r.length;n++){for(var i=r[n],o=i.split("="),u=o[0],s=o[1];u[0]===" ";)u=u.substr(1);if(u===t)return s}return""}D.readCookie=jn;var w={},ce={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCommonConfig=t.BrandToHostMap=t.HeadlessHost=t.DefaultBrand=t.EventContextMap=t.BackofficeDomains=t.LoggerVersion=void 0,t.LoggerVersion="2.0.985|C",t.BackofficeDomains=[".wix.com",".editorx.com"],function(e){e.msid="_msid",e.clientId="_client_id",e.uuid="_uuid",e.visitorId="_visitorId",e.siteMemberId="_siteMemberId",e.brandId="_brandId",e.siteBranchId="_siteBranchId",e.ms="_ms",e.lv="_lv",e.isHeadless="_isHeadless",e.hostingPlatform="_hostingPlatform"}(t.EventContextMap||(t.EventContextMap={})),t.DefaultBrand="wix",t.HeadlessHost="VIEWER_HEADLESS",t.BrandToHostMap={wix:"wix",editorx:"editorx"},t.DefaultCommonConfig={brand:t.DefaultBrand}})(ce),Object.defineProperty(w,"__esModule",{value:!0}),w.getGlobal=w.getWindowIfTop=w.isBackoffice=w.isWebWorker=w.getHost=w.setHost=void 0;var ee=ce,Oe,Me;function An(t){Oe=t}w.setHost=An;function kn(t){if(t===void 0&&(t=ee.DefaultBrand),Oe)return Oe;var e="";return typeof Me>"u"&&(Me=ct(function(n){if(!n.location||!n.location.hostname)return null;var r=n.location.hostname.match(/\.(wix|editorx)\.com$/)||[],i=r[1];return i||null},null)),e=Me||ee.BrandToHostMap[t]||ee.BrandToHostMap[ee.DefaultBrand],"frog.".concat(e,".com")}w.getHost=kn;function Fn(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}w.isWebWorker=Fn;function Ln(){return st(function(t){var e=t.document;return ee.BackofficeDomains.some(function(n){return e.location.host.indexOf(n)!==-1})})}w.isBackoffice=Ln;function st(t){if(typeof window<"u"&&window)try{return window.top===window.self?t?t(window):window:null}catch{return null}return null}w.getWindowIfTop=st;function ct(t,e){return e===void 0&&(e=null),typeof self<"u"&&self&&t(self)||e}w.getGlobal=ct,Object.defineProperty(L,"__esModule",{value:!0}),L.guid=L.buildBiUrl=L.getCookies=void 0;var Hn=D,Nn=w,$n=0;function Wn(t){return Object.keys(t).reduce(function(e,n){var r=typeof t[n]=="string"?{name:t[n]}:t[n],i=r.name,o=r.transform,u=o===void 0?function(a){return a}:o,s=u((0,Hn.readCookie)(i));return s&&(e[n]=s),e},{})}L.getCookies=Wn;function Qn(t,e,n){var r=t.host,i=r===void 0?"":r,o=t.endpoint,u=o===void 0?"":o;n===void 0&&(n={}),i=typeof i=="function"?i():i,i=i||(0,Nn.getHost)(),u=n.endpoint||u,n.useBatch||(e._=""+new Date().getTime()+$n++);var s=n.useBatch?[]:Object.keys(e).map(function(a){return"".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(e[a]))},[]);return["//".concat(i,"/").concat(u)].concat(s.length?s.join("&"):[]).join("?")}L.buildBiUrl=Qn;function zn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})}L.guid=zn;var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.listen=void 0;var le=w;function Gn(t,e,n){if(!(!t||!t[e])){var r=t[e];t[e]=function(){return n.apply(null,arguments),r.apply(t,arguments)}}}function Vn(t){setTimeout(function(){return(0,le.getWindowIfTop)(function(e){return t(e.location.href)})})}function Un(t){(0,le.getWindowIfTop)(function(e){var n=e.history;return["pushState","replaceState"].forEach(function(r){Gn(n,r,function(i,o,u){return t(u)})})})}function Rn(t){(0,le.getWindowIfTop)(function(e){return e.addEventListener("popstate",function(){return t(e.location.href)})})}function qn(t){(0,le.getWindowIfTop)(function(e){var n=e.document.referrer;[Vn,Un,Rn].forEach(function(r){return r(function(i){t(n,i),n=i})})})}fe.listen=qn,Object.defineProperty(se,"__esModule",{value:!0}),se.track=void 0;var xn=L,Xn=fe,te=w,ft=D,lt="__isTrackingPageViews__",Jn="p",Yn=19,Zn=3;function Kn(t){return t||!(0,te.isWebWorker)()&&(0,te.isBackoffice)()&&(0,te.getWindowIfTop)(function(e){return!e[lt]})}function er(){return(0,te.getWindowIfTop)(function(t){return t[lt]=!0})}function tr(t){return t({endpoint:Jn}).updateDefaults({src:Yn,evid:Zn,vsi:(0,xn.guid)()}).logger()}function nr(t){var e=tr(t),n=1;(0,Xn.listen)(function(r,i){var o=(0,te.getWindowIfTop)(function(a){return{sr:(0,ft.getDesktopSize)(a),wr:(0,ft.getWindowSize)(a)}}),u=o.sr,s=o.wr;e.log({from:r,to:i,fis:n,sr:u,wr:s}),n=0})}function rr(t,e){e===void 0&&(e={force:!1}),Kn(e.force)&&(er(),nr(t))}se.track=rr;var dt={},ht={policy:"getCurrentConsentPolicy",header:"_getConsentPolicyHeader",isMethod:!0},ir={policy:"consentPolicy",header:"consentPolicyHeader",isMethod:!1},or={essential:!0,dataToThirdParty:!0,advertising:!0,functional:!0,analytics:!0},O;function ar(){return[fr,cr,sr,ur].forEach(function(t){try{O||(O=t())}catch{}}),O}function ur(){return window}function sr(){return self}function cr(){return global}function fr(){return globalThis}function Ie(t){t===void 0&&(t=void 0),t&&(O=t),!O&&!t&&(O=ar());var e;try{typeof O.commonConfig=="object"&&O.commonConfig.consentPolicy&&(e=Se(O.commonConfig,ir)),!e&&typeof O.consentPolicyManager=="object"&&(e=Se(O.consentPolicyManager,ht)),!e&&typeof O.Wix=="object"&&typeof O.Wix.Utils=="object"&&typeof O.Wix.Utils.getCurrentConsentPolicy=="function"&&(e=Se(O.Wix.Utils,ht))}catch{}return e}function Se(t,e){return{getCurrentConsentPolicy:function(){var n=t[e.policy];return e.isMethod?n():n},_getConsentPolicyHeader:function(){var n=t[e.header];return e.isMethod?n():n},deleteReference:!e.isMethod}}var lr=function(){function t(e){e&&(this.env=e),this.consentPolicyAccess=Ie(this.env)}return t.prototype.clearReference=function(){this.consentPolicyAccess&&this.consentPolicyAccess.deleteReference&&(this.consentPolicyAccess=void 0)},t.prototype.getCurrentConsentPolicy=function(){this.consentPolicyAccess||(this.consentPolicyAccess=Ie(this.env));var e=this.consentPolicyAccess&&this.consentPolicyAccess.getCurrentConsentPolicy()||or;return this.clearReference(),e.policy?e.policy:e},t.prototype.getConsentPolicyHeader=function(e){e===void 0&&(e=!1),this.consentPolicyAccess||(this.consentPolicyAccess=Ie(this.env));var n=this.consentPolicyAccess&&this.consentPolicyAccess._getConsentPolicyHeader()||{"consent-policy":""};return this.clearReference(),e?n["consent-policy"]:n},t}();const dr=St(Object.freeze(Object.defineProperty({__proto__:null,ConsentPolicyAccessor:lr},Symbol.toStringTag,{value:"Module"})));var z={},G={},vt=P&&P.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.APINotSupportedError=G.AssertionError=void 0;var hr=function(t){vt(e,t);function e(n){var r=t.call(this,n)||this;return r.name=r.constructor.name,r}return e}(Error);G.AssertionError=hr;var vr=function(t){vt(e,t);function e(n){var r=t.call(this,n)||this;return r.name=r.constructor.name,r}return e}(Error);G.APINotSupportedError=vr,Object.defineProperty(z,"__esModule",{value:!0}),z.ok=z.object=z.defined=void 0;var je=G,gr=function(t,e){if(t===void 0)throw new je.AssertionError(e)};z.defined=gr;var yr=function(t,e){if(t!==void 0&&(typeof t!="object"||Array.isArray(t)||t===null))throw new je.AssertionError(e)};z.object=yr;var mr=function(t,e){if(!t)throw new je.AssertionError(e)};z.ok=mr;var gt={},de={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=t.EventCategories=t.PublishMethods=void 0,function(e){e.Auto="auto",e.PostMessage="postMessage",e.Fetch="fetch"}(t.PublishMethods||(t.PublishMethods={})),function(e){e.Essential="essential",e.Functional="functional",e.Analytics="analytics"}(t.EventCategories||(t.EventCategories={})),function(e){e[e.Unsupported=0]="Unsupported"}(t.Errors||(t.Errors={}))})(de);var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.postMessageTransport=j.xhrTransport=j.fetchTransport=j.pixelTransport=j.beaconTransport=void 0;var pr=D,_r=G;function br(t,e,n){return n===void 0&&(n=!1),new Promise(function(r,i){return(0,pr.sendBeacon)(t,n?JSON.stringify(e):void 0)?r():i(new Error("Transport Error: Cannot send bi using beacon"))})}j.beaconTransport=br;function Pr(t,e){return new Promise(function(n,r){var i=e||new window.Image(0,0);i.onload=function(){return n()},i.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},i.src=t})}j.pixelTransport=Pr;function wr(t,e,n,r){if(n===void 0&&(n="GET"),typeof r>"u"){if(typeof fetch>"u")return Promise.reject(new _r.APINotSupportedError("fetch"));r=fetch}var i={method:n,credentials:"include"};return n==="POST"?i.body=JSON.stringify(e):i.keepalive=!0,r(t,i).then(function(o){if(!o.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: ".concat(o.status))})}j.fetchTransport=wr;function Tr(t,e,n){return n===void 0&&(n="GET"),new Promise(function(r,i){var o=new XMLHttpRequest;o.open(n,"".concat(location.protocol).concat(t)),o.onload=r,o.onerror=function(){i(new Error("Transport Error: Cannot send bi using xhr."))},o.withCredentials=!0,n==="POST"?o.send(JSON.stringify(e)):o.send()})}j.xhrTransport=Tr;function Er(t,e){e===void 0&&(e=self.postMessage);var n=[t];return typeof WorkerGlobalScope>"u"&&n.push("*"),e.apply(self,n)}j.postMessageTransport=Er,function(t){var e=P&&P.__assign||function(){return e=Object.assign||function(l){for(var c,y=1,v=arguments.length;y<v;y++){c=arguments[y];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(l[m]=c[m])}return l},e.apply(this,arguments)},n=P&&P.__rest||function(l,c){var y={};for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&c.indexOf(v)<0&&(y[v]=l[v]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,v=Object.getOwnPropertySymbols(l);m<v.length;m++)c.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(l,v[m])&&(y[v[m]]=l[v[m]]);return y};Object.defineProperty(t,"__esModule",{value:!0}),t.getTransformers=t.getPublisher=t.postMessagePublisher=t.xhrPublisher=t.fetchPublisher=t.beaconPublisher=t.imagePublisher=t.resolvePublisher=void 0;var r=L,i=w,o=G,u=de,s=j,a=function(l){return l.useBatch?"POST":"GET"},f=function(l,c){var y,v;return l.publishMethod===u.PublishMethods.PostMessage?(y=p,v=c&&c[u.PublishMethods.PostMessage]):l.publishMethod===u.PublishMethods.Fetch?(y=g,v=c&&c[u.PublishMethods.Fetch]):(0,i.isWebWorker)()?y=g:y=h,y(l,v)};t.resolvePublisher=f;function d(l){return l===void 0&&(l={}),function(y,v){if(v===void 0&&(v={}),v.useBatch)throw new o.APINotSupportedError("Can't use image publisher to send batched events.");var m=(0,r.buildBiUrl)(l,y,v);return(0,s.pixelTransport)(m,v.image)}}t.imagePublisher=d;function h(l){return l===void 0&&(l={}),function(y,v){v===void 0&&(v={});var m=(0,r.buildBiUrl)(l,y,v);return(0,s.beaconTransport)(m,y,!!v.useBatch).catch(function(){var M=a(v);return v.useBatch?(0,s.fetchTransport)(m,y,M).catch(function(S){return S instanceof o.APINotSupportedError?(0,s.xhrTransport)(m,y,M):Promise.reject(S)}):(0,s.pixelTransport)(m,v.image)})}}t.beaconPublisher=h;function g(l,c){return l===void 0&&(l={}),function(v,m){m===void 0&&(m={});var M=(0,r.buildBiUrl)(l,v,m),S=a(m);return(0,s.fetchTransport)(M,v,S,c).catch(function($){return $ instanceof o.APINotSupportedError?(0,s.xhrTransport)(M,v,S):Promise.reject($)})}}t.fetchPublisher=g;function b(l){return l===void 0&&(l={}),function(y,v){v===void 0&&(v={});var m=(0,r.buildBiUrl)(l,y,v),M=a(v);return(0,s.xhrTransport)(m,y,M)}}t.xhrPublisher=b;function p(l,c){return function(v){return(0,s.postMessageTransport)(v,c)}}t.postMessagePublisher=p;function C(l,c){return(0,t.resolvePublisher)(l,c)}t.getPublisher=C;var N=function(l,c){var y,v;c&&(typeof c!="function"&&c.postMessage&&l.publishMethod===u.PublishMethods.PostMessage?v=c.postMessage:typeof c=="function"&&(y=c));var m=y,M=function(S,$){if($.useBatch){var Fr=function(X){return(X==null?void 0:X.endpoint)||$.endpoint||l.endpoint};S.e=S.e.map(function(X){var Lr=X.context,pt=n(X,["context"]),Hr=e(e({},pt),{f:e(e({},pt.f),{_rp:Fr(Lr)})});return Hr})}return v?v(S):S};return{eventTransformer:m,payloadTransformer:M}};t.getTransformers=N}(gt);var Ae={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getWixHost=t.getBranchId=t.getBrand=t.getCommonConfigValue=void 0;var e=w,n=ce,r=function(){return(0,e.getGlobal)(function(a){return a.Wix&&a.Wix.Utils&&a.Wix.Utils.commonConfig||a.commonConfig})},i=function(a,f){return f===void 0&&(f=r()),f=f&&typeof f.getAll=="function"?f.getAll():f,!f||typeof f[a]>"u"?n.DefaultCommonConfig[a]:f[a]};t.getCommonConfigValue=i;var o=function(a){return(0,t.getCommonConfigValue)("brand",a())};t.getBrand=o;var u=function(a){return(0,t.getCommonConfigValue)("branchId",a())};t.getBranchId=u;var s=function(a){return(0,t.getCommonConfigValue)("host",a())};t.getWixHost=s})(Ae);var yt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonDefaults=t.getUserDefaults=t.transformDefaults=void 0;var e=ce,n=D,r=Ae,i=L,o=function(f){return Object.keys(f).reduce(function(d,h){var g=e.EventContextMap[h]||h;return d[g]=f[h],d},{})};t.transformDefaults=o;var u=function(){return(0,i.getCookies)({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(f){return typeof f=="string"&&f.split("|")[1]}}})};t.getUserDefaults=u;var s=function(f,d){return(0,t.transformDefaults)({brandId:function(){return(0,r.getBrand)(f)},siteBranchId:function(){return(0,r.getBranchId)(f)},ms:function(){return Math.round((0,n.now)())},isHeadless:function(){return a(f)},hostingPlatform:function(){return(0,r.getWixHost)(f)},lv:e.LoggerVersion})};t.getCommonDefaults=s;var a=function(f){return(0,r.getWixHost)(f)===e.HeadlessHost||void 0}})(yt),function(t){var e=P&&P.__assign||function(){return e=Object.assign||function(l){for(var c,y=1,v=arguments.length;y<v;y++){c=arguments[y];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(l[m]=c[m])}return l},e.apply(this,arguments)},n=P&&P.__createBinding||(Object.create?function(l,c,y,v){v===void 0&&(v=y);var m=Object.getOwnPropertyDescriptor(c,y);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[y]}}),Object.defineProperty(l,v,m)}:function(l,c,y,v){v===void 0&&(v=y),l[v]=c[y]}),r=P&&P.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),i=P&&P.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var y in l)y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)&&n(c,l,y);return r(c,l),c};Object.defineProperty(t,"__esModule",{value:!0}),t.BiLoggerClientFactory=t.createBatchQueue=t.manager=t.factory=t.Factory=t.setHost=t.EventCategories=t.PublishMethods=void 0;var o=Q,u=dr,s=i(z),a=gt,f=Ae,d=w,h=de,g=yt,b=de;Object.defineProperty(t,"PublishMethods",{enumerable:!0,get:function(){return b.PublishMethods}}),Object.defineProperty(t,"EventCategories",{enumerable:!0,get:function(){return b.EventCategories}});var p=w;Object.defineProperty(t,"setHost",{enumerable:!0,get:function(){return p.setHost}});var C=function(){function l(c){c===void 0&&(c={}),this.options=c,this.commonConfigGetter=function(){},this.initialized=!1,s.ok(!c.publishMethod||Object.keys(h.PublishMethods).map(function(y){return h.PublishMethods[y]}).indexOf(c.publishMethod)!==-1,'Unsupported publish method "'.concat(c.publishMethod,'"')),l.consentPolicyAccessor=l.consentPolicyAccessor||new u.ConsentPolicyAccessor,this.loggerClientFactory=(0,o.factory)()}return l.prototype.initFactory=function(){var c=this;if(this.initialized)return this.loggerClientFactory;this.initialized=!0,this.updateDefaults((0,g.getCommonDefaults)(this.commonConfigGetter,l.consentPolicyAccessor)),this.withUserContext((0,g.getUserDefaults)());var y=e(e({},this.options),{host:this.options.host||function(){return(0,d.getHost)((0,f.getBrand)(c.commonConfigGetter))}}),v=(0,a.getPublisher)(y,this.publishFunctions),m=(0,a.getTransformers)(y,this.transformer),M=m.eventTransformer,S=m.payloadTransformer,$=this.loggerClientFactory.addPublisher(v).withConsentPolicyGetter(function(){return l.consentPolicyAccessor.getCurrentConsentPolicy()});return M&&$.withEventTransformer(M),S&&$.withPayloadTransformer(S),$},l.prototype.withTransformer=function(c){return s.defined(c,"Transformer must be provided"),s.ok(typeof c=="function"||c&&typeof c[h.PublishMethods.PostMessage]=="function","Valid transformer must be provided"),this.transformer=c,this},l.prototype.withPublishFunction=function(c){return s.defined(c,"Publish functions object must be provided"),s.ok(this.options.publishMethod&&this.options.publishMethod!==h.PublishMethods.Auto,"Publish function can be used only when using a custom publish method"),s.ok(c&&typeof c[this.options.publishMethod]=="function","Valid publish function must be provided"),this.publishFunctions=c,this},l.prototype.withUserContext=function(c){return s.defined(c,"User context object must be provided"),this.updateDefaults((0,g.transformDefaults)(c)),this},l.prototype.withUoUContext=function(c){return s.defined(c,"UoU context object must be provided"),this.updateDefaults((0,g.transformDefaults)(c)),this},l.prototype.withNonEssentialContext=function(c){return s.defined(c,"Non-essential context object must be provided"),this.loggerClientFactory.updateNonEssentialDefaults((0,g.transformDefaults)(c)),this},l.prototype.withCommonConfigGetter=function(c){return s.defined(c,"Common config getter must be provided"),s.ok(typeof c=="function","Common config getter must be a function"),this.commonConfigGetter=c,this},l.prototype.updateDefaults=function(c){return this.loggerClientFactory.updateDefaults(c),this},l.prototype.setMuted=function(c){return this.loggerClientFactory.setMuted(c),this},l.prototype.setEvents=function(c){return this.loggerClientFactory.setEvents(c),this},l.prototype.setGlobalBatchQueue=function(c){return this.loggerClientFactory.setGlobalBatchQueue(c),this},l.prototype.onError=function(c){return this.loggerClientFactory.setPublisherFailHandler(c),this},l.prototype.logger=function(c){c===void 0&&(c={});var y=this.options,v=y.endpoint,m=y.useBatch,M=this.initFactory().logger(e({endpoint:v,useBatch:m},c));return M},l}();t.Factory=C;var N=function(l){return l===void 0&&(l={}),new C(l)};t.factory=N,t.manager=o.manager,t.createBatchQueue=o.createBatchQueue,t.BiLoggerClientFactory=o.BiLoggerFactory}(dt),function(t){var e=P&&P.__createBinding||(Object.create?function(a,f,d,h){h===void 0&&(h=d);var g=Object.getOwnPropertyDescriptor(f,d);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(a,h,g)}:function(a,f,d,h){h===void 0&&(h=d),a[h]=f[d]}),n=P&&P.__setModuleDefault||(Object.create?function(a,f){Object.defineProperty(a,"default",{enumerable:!0,value:f})}:function(a,f){a.default=f}),r=P&&P.__importStar||function(a){if(a&&a.__esModule)return a;var f={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&e(f,a,d);return n(f,a),f};Object.defineProperty(t,"__esModule",{value:!0}),t.BiLoggerClientFactory=t.EventCategories=t.createBatchQueue=t.manager=t.setHost=t.factory=void 0;var i=Q,o=r(se),u=r(dt),s=function(a){a===void 0&&(a={});var f=a.trackSession||typeof a.trackSession>"u";return f&&o.track(u.factory,{force:f==="force"}),u.factory(a)};t.factory=s,t.setHost=u.setHost,t.manager=i.manager,t.createBatchQueue=i.createBatchQueue,t.EventCategories=u.EventCategories,t.BiLoggerClientFactory=u.BiLoggerClientFactory,t.default={factory:t.factory,setHost:u.setHost,manager:i.manager,createBatchQueue:i.createBatchQueue,EventCategories:u.EventCategories,BiLoggerClientFactory:u.BiLoggerClientFactory}}(Xe);const Cr=It(Xe);var Br=function(t){return{evid:180,src:11,endpoint:"pulse",params:t}};const Dr=/\/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}(\/|$)/g,Or=/\/[0-9a-fA-F]{24,}(\/|$)/g,Mr=/\/[0-9]{12}(\/|$)/g,Ir=/\/[0-9]{4}-[0-9]{2}-[0-9]{2}(\/|$)/g,Sr=t=>{const e=new URL(t);return e.pathname=e.pathname.replace(Dr,"/:guid$1"),e.pathname=e.pathname.replace(Or,"/:id$1"),e.pathname=e.pathname.replace(Mr,"/:id$1"),e.pathname=e.pathname.replace(Ir,"/:date$1"),e.pathname=e.pathname.replace(/\/$/,""),e.search="",e.toString()};class jr{constructor(e,n){J(this,"_queue",new Set);J(this,"_logger",Cr.factory().logger());J(this,"_url");J(this,"_platform");this._url=Sr(e),this._platform=n}flushQueue(){if(this._queue.size>0){const e={};this._queue.forEach(({name:r,value:i})=>{e[r]=i});const n=JSON.stringify(e);this._logger.report(Br({platform:this._platform,url:this._url,webVitals:n})),this._queue.clear()}}addToQueue(e){const{name:n,value:r}=e;this._queue.add({name:n,value:r})}}class Ar{constructor(e){J(this,"_platform");this._platform=e,this._init()}_init(){const e=new jr(window.location.href,this._platform);Mt(n=>e.addToQueue(n),{reportSoftNavs:!0}),Ne(n=>e.addToQueue(n),{reportSoftNavs:!0}),Dt(n=>e.addToQueue(n),{reportSoftNavs:!0}),bt(n=>e.addToQueue(n),{reportSoftNavs:!0}),Tt(n=>e.addToQueue(n),{reportSoftNavs:!0}),Bt(n=>e.addToQueue(n),{reportSoftNavs:!0}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e.flushQueue()}),addEventListener("pagehide",e.flushQueue)}}const kr=((mt=document.currentScript)==null?void 0:mt.getAttribute("data-platform"))||"viewer";new Ar(kr)});
